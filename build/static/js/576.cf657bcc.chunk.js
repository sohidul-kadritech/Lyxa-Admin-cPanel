"use strict";(self.webpackChunklyxa_admin_console=self.webpackChunklyxa_admin_console||[]).push([[576],{26576:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var n=a(74165),r=a(15861),l=a(29439),s=a(70816),o=a.n(s),i=a(47313),c=a(5509),u=a(76617),d=a(37729),h=a(8355),m=a(97265),f=a(56547),v=a(77338),x=a(21422),D=a(34382),p=a(20587),j=a(47764),b=a(66076),g=a(46417);var y=function(e){var t,a=e.filterType,n=e.startDate,r=e.endDate,l=e.year,s=e.type,o=e.startDateValue,i=e.endDateValue,c=e.chartData,u=void 0===c?{}:c,d=e.isLoading,y=e.yearValue,S=e.graphType,A=e.getMonth,Z=e.month,N={labels:u.labels,datasets:[{label:"Analytics",backgroundColor:"#ffeded",borderColor:"#df1e32",borderWidth:1,hoverBackgroundColor:"#df1e32",hoverBorderColor:"#df1e32",data:null!==(t=null===u||void 0===u?void 0:u.series)&&void 0!==t?t:[]}]},R={toolbar:{show:!1},low:0,tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].data[e.index];return" ".concat(S,"s - ").concat(a)},title:function(e,t){return" ".concat("normal"===s.value||"month"===s.value?"Date":"Month"," - ").concat(t.labels[e[0].index])}}},scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:5,callback:function(e){if(e%1===0)return e}}}]}};return(0,g.jsx)(v.Z,{children:(0,g.jsxs)(x.Z,{children:[(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,g.jsx)("h4",{className:"card-title mb-4 text-capitalize",style:{width:"140px"},children:"".concat(S,"s Graph")}),(0,g.jsxs)(D.Z,{style:{flex:"1"},children:[(0,g.jsx)(p.Z,{lg:4,children:(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{className:"control-label",children:"Filter By"}),(0,g.jsx)(f.ZP,{palceholder:"Select Status",options:j.Yx,classNamePrefix:"select2-selection",value:s,onChange:function(e){return a(e)}})]})}),(0,g.jsx)(p.Z,{lg:8,children:"year"===s.value?(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{children:"Year"}),(0,g.jsx)("input",{type:"number",className:"form-control",placeholder:"Enter year",min:2021,max:(new Date).getFullYear(),value:y,onChange:function(e){return l(e.target.value)}})]}):"month"===s.value?(0,g.jsx)(D.Z,{children:(0,g.jsx)(p.Z,{md:6,children:(0,g.jsxs)("div",{className:"",children:[(0,g.jsx)("label",{className:"control-label",children:"Select Month"}),(0,g.jsx)(f.ZP,{palceholder:"Select Status",options:j.EN,classNamePrefix:"select2-selection",value:Z,onChange:A})]})})}):(0,g.jsxs)("div",{className:"d-flex my-3 my-md-0 ",children:[(0,g.jsxs)("div",{className:" w-100",children:[(0,g.jsx)("label",{children:"Start Date"}),(0,g.jsx)("div",{className:"form-group mb-0 w-100",children:(0,g.jsx)(m.Z,{className:"form-control d-block",id:"startDate",placeholder:"Start Date",value:o,onChange:function(e,t){return n(t)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}})})]}),(0,g.jsxs)("div",{className:"ms-2 w-100",children:[(0,g.jsx)("label",{children:"End Date"}),(0,g.jsx)("div",{className:"form-group mb-0",children:(0,g.jsx)(m.Z,{className:"form-control w-100",id:"endDate",placeholder:"Select End Date",value:i,onChange:function(e,t){return r(t)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}})})]})]})})]})]}),(0,g.jsx)(D.Z,{children:(0,g.jsx)(p.Z,{children:(0,g.jsx)("div",{children:d?(0,g.jsx)(b.Z,{}):(0,g.jsx)(h.x1,{width:600,height:245,data:N,options:R})})})})]})})};var S=function(e){var t=e.graphType,a=o()().startOf("month").format("YYYY-MM-DD"),s=o()().endOf("month").format("YYYY-MM-DD"),h=(0,c.b)().currentUser.userType,m=(0,i.useState)({label:"Daily",value:"normal"}),f=(0,l.Z)(m,2),v=f[0],x=f[1],D=(0,i.useState)((new Date).getFullYear()),p=(0,l.Z)(D,2),j=p[0],b=p[1],S=(0,i.useState)(a),A=(0,l.Z)(S,2),Z=A[0],N=A[1],R=(0,i.useState)(s),Y=(0,l.Z)(R,2),_=Y[0],M=Y[1],w=(0,i.useState)([]),E=(0,l.Z)(w,2),H=E[0],O=E[1],k=(0,i.useState)({}),P=(0,l.Z)(k,2),G=P[0],B=P[1],C=(0,i.useState)(!1),F=(0,l.Z)(C,2),I=F[0],L=F[1],T=(0,i.useState)({label:"January",value:"1"}),V=(0,l.Z)(T,2),z=V[0],U=V[1],q={day:"numeric",month:"short"},J=function(e){return"order"===e?"admin"===h?u.ADMIN_DASHBOARD_ORDER_GRAPH:"seller"===h?u.SELLER_DASHBOARD_ORDER_GRAPH:u.SHOP_DASHBOARD_ORDER_GRAPH:"user"===e?u.ADMIN_DASHBOARD_USERS_GRAPH:"earning"===e?"admin"===h?u.ADMIN_DASHBOARD_EARNING_GRAPH:"seller"===h?u.SELLER_DASHBOARD_EARNING_GRAPH:u.SHOP_DASHBOARD_EARNING_GRAPH:void 0};(0,i.useEffect)((function(){var e=!0,a=function(){var a=(0,r.Z)((0,n.Z)().mark((function a(){var r,l,s;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(v&&j||Z||_||z)){a.next=14;break}return L(!0),a.prev=2,a.next=5,(0,d.Z)().request(J(t),{params:{startDate:Z,endDate:_,type:"month"===v.value?"normal":v.value,year:j}});case 5:r=a.sent,(l=r.data)&&e&&(L(!1),l.status&&(s=l.data.info,O(s))),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(2),console.log(a.t0.message),e&&(L(!1),L(!1));case 14:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(){return a.apply(this,arguments)}}();return a(),function(){e=!1}}),[v,j,Z,_]),(0,i.useEffect)((function(){if(H.length>0){var e=null===H||void 0===H?void 0:H.map((function(e){return e.date?new Date(null===e||void 0===e?void 0:e.date).toLocaleDateString("en-GB",q):o()(null===e||void 0===e?void 0:e.month,"M").format("MMMM")})),a=null===H||void 0===H?void 0:H.map((function(e){return"earning"!==t?e[t]:e[t].toFixed(2)}));if(e&&a)B({labels:e,series:a})}}),[H]);var W=function(e){var t=e.value,a=(new Date).getFullYear(),n=o()([a,t-1]),r=o()(n).endOf("month");N(n.format("YYYY-MM-DD")),M(r.format("YYYY-MM-DD"))};return console.log(G),(0,g.jsx)(y,{filterType:function(e){return function(e){x(e),"normal"===e.value?(N(a),M(s)):"month"===e.value&&W(z)}(e)},startDate:function(e){return N(e)},endDate:function(e){return M(e)},year:function(e){return b(e)},type:v,startDateValue:Z,endDateValue:_,chartData:G,isLoading:I,yearValue:j,graphType:t,getMonth:function(e){W(e),U(e)},month:z})}}}]);