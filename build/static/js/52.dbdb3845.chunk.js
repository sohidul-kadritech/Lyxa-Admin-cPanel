"use strict";(self.webpackChunkdrop_admin=self.webpackChunkdrop_admin||[]).push([[52],{12052:function(e,a,t){t.r(a),t.d(a,{default:function(){return y}});var n=t(74165),r=t(15861),l=t(29439),s=t(72426),o=t.n(s),c=t(72791),i=t(47374),d=t(54852),u=t(29557),m=t(57425),h=t(82357),f=t(48284),v=t(56153),x=t(27988),p=t(42937),j=t(9806),g=t(28353),b=t(80184),D=function(e){var a,t=e.filterType,n=e.startDate,r=e.endDate,l=e.year,s=e.type,o=e.startDateValue,i=e.endDateValue,d=e.chartData,D=void 0===d?{}:d,y=e.isLoading,Z=e.yearValue,Y=e.graphType,S=e.getMonth,N=e.month,w={labels:D.labels,datasets:[{label:"Analytics",backgroundColor:"#02a499",borderColor:"#02a499",borderWidth:1,hoverBackgroundColor:"#02a499",hoverBorderColor:"#02a499",data:null!==(a=null===D||void 0===D?void 0:D.series)&&void 0!==a?a:[]}]},M={tootlbar:{show:!1},low:0,tooltips:{callbacks:{label:function(e,a){var t=a.datasets[e.datasetIndex].data[e.index];return" ".concat(Y,"s - ").concat(t)},title:function(e,a){return" ".concat("normal"===s.value||"month"===s.value?"Date":"Month"," - ").concat(a.labels[e[0].index])}}},scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:5,callback:function(e){if(e%1===0)return e}}}]}};return(0,b.jsx)(c.Fragment,{children:(0,b.jsx)(h.Z,{children:(0,b.jsxs)(f.Z,{children:[(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,b.jsx)("h4",{className:"card-title mb-4 text-capitalize",style:{width:"140px"},children:"".concat(Y,"s Graph")}),(0,b.jsxs)(v.Z,{style:{flex:"1"},children:[(0,b.jsx)(x.Z,{lg:4,children:(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"control-label",children:"Filter By"}),(0,b.jsx)(m.ZP,{palceholder:"Select Status",options:j.Yx,classNamePrefix:"select2-selection",value:s,onChange:function(e){return t(e)}})]})}),(0,b.jsx)(x.Z,{lg:8,children:"year"===s.value?(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Year"}),(0,b.jsx)("input",{type:"number",className:"form-control",placeholder:"Enter year",min:2021,max:(new Date).getFullYear(),value:Z,onChange:function(e){return l(e.target.value)}})]}):"month"===s.value?(0,b.jsx)(v.Z,{children:(0,b.jsx)(x.Z,{md:6,children:(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("label",{className:"control-label",children:"Select Month"}),(0,b.jsx)(m.ZP,{palceholder:"Select Status",options:j.EN,classNamePrefix:"select2-selection",value:N,onChange:S})]})})}):(0,b.jsxs)("div",{className:"d-flex my-3 my-md-0 ",children:[(0,b.jsxs)("div",{className:" w-100",children:[(0,b.jsx)("label",{children:"Start Date"}),(0,b.jsx)("div",{className:"form-group mb-0 w-100",children:(0,b.jsx)(u.Z,{className:"form-control d-block",id:"startDate",placeholder:"Start Date",value:o,onChange:function(e,a,t){return n(a)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}})})]}),(0,b.jsxs)("div",{className:"ms-2 w-100",children:[(0,b.jsx)("label",{children:"End Date"}),(0,b.jsx)("div",{className:"form-group mb-0",children:(0,b.jsx)(u.Z,{className:"form-control w-100",id:"endDate",placeholder:"Select End Date",value:i,onChange:function(e,a,t){return r(a)},options:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}})})]})]})})]})]}),(0,b.jsx)(v.Z,{children:(0,b.jsx)(x.Z,{children:(0,b.jsx)("div",{children:y?(0,b.jsx)(p.Z,{animation:"border",color:"success"}):(0,b.jsx)(g.$Q,{width:600,height:245,data:w,options:M})})})})]})})})},y=function(e){var a=e.graphType,t=o()().startOf("month").format("YYYY-MM-DD"),s=o()().endOf("month").format("YYYY-MM-DD"),u=JSON.parse(localStorage.getItem("admin")),m=u.account_type,h=(u._id,(0,c.useState)({label:"Daily",value:"normal"})),f=(0,l.Z)(h,2),v=f[0],x=f[1],p=(0,c.useState)((new Date).getFullYear()),j=(0,l.Z)(p,2),g=j[0],y=j[1],Z=(0,c.useState)(t),Y=(0,l.Z)(Z,2),S=Y[0],N=Y[1],w=(0,c.useState)(s),M=(0,l.Z)(w,2),k=M[0],F=M[1],C=(0,c.useState)([]),E=(0,l.Z)(C,2),O=E[0],V=E[1],L=(0,c.useState)({}),T=(0,l.Z)(L,2),B=T[0],I=T[1],P=(0,c.useState)(!1),_=(0,l.Z)(P,2),A=_[0],J=_[1],z=(0,c.useState)({label:"January",value:"1"}),G=(0,l.Z)(z,2),Q=G[0],q=G[1],K={day:"numeric",month:"short"};(0,c.useEffect)((0,r.Z)((0,n.Z)().mark((function e(){var t,r,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(v&&g||S||k||Q)){e.next=15;break}return J(!0),e.prev=2,e.next=5,(0,d.Z)().request(W(a),{params:{startDate:S,endDate:k,type:"month"===v.value?"normal":v.value,year:g}});case 5:t=e.sent,(r=t.data)&&(J(!1),r.status&&(l=r.data.info,V(l))),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0.message),J(!1),J(!1);case 15:case"end":return e.stop()}}),e,null,[[2,10]])}))),[v,g,S,k]);var W=function(e){return"order"===e?"admin"===m?i.xi:"seller"===m?i.Nc:i.ce:"user"===e?i.LQ:"earning"===e?"admin"===m?i.OL:"seller"===m?i.gK:i.OJ:void 0};(0,c.useEffect)((function(){if(O.length>0){var e=null===O||void 0===O?void 0:O.map((function(e,a){return e.date?new Date(null===e||void 0===e?void 0:e.date).toLocaleDateString("en-GB",K):o()(null===e||void 0===e?void 0:e.month,"M").format("MMMM")})),t=null===O||void 0===O?void 0:O.map((function(e){return e[a]}));if(e&&t)I({labels:e,series:t})}}),[O]);var $=function(e){var a=e.value,t=(new Date).getFullYear(),n=o()([t,a-1]),r=o()(n).endOf("month");N(n.format("YYYY-MM-DD")),F(r.format("YYYY-MM-DD"))};return(0,b.jsx)(c.Fragment,{children:(0,b.jsx)(D,{filterType:function(e){return function(e){x(e),"normal"===e.value?(N(t),F(s)):"month"===e.value&&$(Q)}(e)},startDate:function(e){return N(e)},endDate:function(e){return F(e)},year:function(e){return y(e)},type:v,startDateValue:S,endDateValue:k,chartData:B,isLoading:A,yearValue:g,graphType:a,getMonth:function(e){$(e),q(e)},month:Q})})}}}]);
//# sourceMappingURL=52.dbdb3845.chunk.js.map