"use strict";(self.webpackChunklyxa_admin_console=self.webpackChunklyxa_admin_console||[]).push([[576],{26576:(e,a,t)=>{t.r(a),t.d(a,{default:()=>b});var l=t(70816),s=t.n(l),n=t(47313),r=t(5509),o=t(76617),c=t(37729),d=t(8355),i=t(97265),u=t(66108),h=t(77338),m=t(21422),D=t(34382),x=t(20587),v=t(47764),f=t(66076),p=t(46417);const j=function(e){var a;let{filterType:t,startDate:l,endDate:s,year:n,type:r,startDateValue:o,endDateValue:c,chartData:j={},isLoading:b,yearValue:y,graphType:g,getMonth:S,month:A}=e;const N={labels:j.labels,datasets:[{label:"Analytics",backgroundColor:"#ffeded",borderColor:"#df1e32",borderWidth:1,hoverBackgroundColor:"#df1e32",hoverBorderColor:"#df1e32",data:null!==(a=null===j||void 0===j?void 0:j.series)&&void 0!==a?a:[]}]},R={toolbar:{show:!1},low:0,tooltips:{callbacks:{label(e,a){const t=a.datasets[e.datasetIndex].data[e.index];return" ".concat(g,"s - ").concat(t)},title:(e,a)=>" ".concat("normal"===r.value||"month"===r.value?"Date":"Month"," - ").concat(a.labels[e[0].index])}},scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:5,callback(e){if(e%1===0)return e}}}]}};return(0,p.jsx)(h.Z,{children:(0,p.jsxs)(m.Z,{children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,p.jsx)("h4",{className:"card-title mb-4 text-capitalize",style:{width:"140px"},children:"".concat(g,"s Graph")}),(0,p.jsxs)(D.Z,{style:{flex:"1"},children:[(0,p.jsx)(x.Z,{lg:4,children:(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)("label",{className:"control-label",children:"Filter By"}),(0,p.jsx)(u.ZP,{palceholder:"Select Status",options:v.Yx,classNamePrefix:"select2-selection",value:r,onChange:e=>t(e)})]})}),(0,p.jsx)(x.Z,{lg:8,children:"year"===r.value?(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{children:"Year"}),(0,p.jsx)("input",{type:"number",className:"form-control",placeholder:"Enter year",min:2021,max:(new Date).getFullYear(),value:y,onChange:e=>n(e.target.value)})]}):"month"===r.value?(0,p.jsx)(D.Z,{children:(0,p.jsx)(x.Z,{md:6,children:(0,p.jsxs)("div",{className:"",children:[(0,p.jsx)("label",{className:"control-label",children:"Select Month"}),(0,p.jsx)(u.ZP,{palceholder:"Select Status",options:v.EN,classNamePrefix:"select2-selection",value:A,onChange:S})]})})}):(0,p.jsxs)("div",{className:"d-flex my-3 my-md-0 ",children:[(0,p.jsxs)("div",{className:" w-100",children:[(0,p.jsx)("label",{children:"Start Date"}),(0,p.jsx)("div",{className:"form-group mb-0 w-100",children:(0,p.jsx)(i.Z,{className:"form-control d-block",id:"startDate",placeholder:"Start Date",value:o,onChange:(e,a)=>l(a),options:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}})})]}),(0,p.jsxs)("div",{className:"ms-2 w-100",children:[(0,p.jsx)("label",{children:"End Date"}),(0,p.jsx)("div",{className:"form-group mb-0",children:(0,p.jsx)(i.Z,{className:"form-control w-100",id:"endDate",placeholder:"Select End Date",value:c,onChange:(e,a)=>s(a),options:{altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d"}})})]})]})})]})]}),(0,p.jsx)(D.Z,{children:(0,p.jsx)(x.Z,{children:(0,p.jsx)("div",{children:b?(0,p.jsx)(f.Z,{}):(0,p.jsx)(d.x1,{width:600,height:245,data:N,options:R})})})})]})})};const b=function(e){let{graphType:a}=e;const t=s()().startOf("month").format("YYYY-MM-DD"),l=s()().endOf("month").format("YYYY-MM-DD"),{currentUser:d}=(0,r.b)(),{userType:i}=d,[u,h]=(0,n.useState)({label:"Daily",value:"normal"}),[m,D]=(0,n.useState)((new Date).getFullYear()),[x,v]=(0,n.useState)(t),[f,b]=(0,n.useState)(l),[y,g]=(0,n.useState)([]),[S,A]=(0,n.useState)({}),[N,R]=(0,n.useState)(!1),[Y,_]=(0,n.useState)({label:"January",value:"1"}),M={day:"numeric",month:"short"};(0,n.useEffect)((()=>{let e=!0;return(async()=>{if(u&&m||x||f||Y){R(!0);try{const{data:t}=await(0,c.Z)().request((e=>"order"===e?"admin"===i?o.ADMIN_DASHBOARD_ORDER_GRAPH:"seller"===i?o.SELLER_DASHBOARD_ORDER_GRAPH:o.SHOP_DASHBOARD_ORDER_GRAPH:"user"===e?o.ADMIN_DASHBOARD_USERS_GRAPH:"earning"===e?"admin"===i?o.ADMIN_DASHBOARD_EARNING_GRAPH:"seller"===i?o.SELLER_DASHBOARD_EARNING_GRAPH:o.SHOP_DASHBOARD_EARNING_GRAPH:void 0)(a),{params:{startDate:x,endDate:f,type:"month"===u.value?"normal":u.value,year:m}});if(t&&e&&(R(!1),t.status)){const{info:e}=t.data;g(e)}}catch(t){console.log(t.message),e&&(R(!1),R(!1))}}})(),()=>{e=!1}}),[u,m,x,f]),(0,n.useEffect)((()=>{if(y.length>0){const e=null===y||void 0===y?void 0:y.map((e=>e.date?new Date(null===e||void 0===e?void 0:e.date).toLocaleDateString("en-GB",M):s()(null===e||void 0===e?void 0:e.month,"M").format("MMMM"))),t=null===y||void 0===y?void 0:y.map((e=>"earning"!==a?e[a]:e[a].toFixed(2)));if(e&&t){A({labels:e,series:t})}}}),[y]);const E=e=>{let{value:a}=e;const t=(new Date).getFullYear(),l=s()([t,a-1]),n=s()(l).endOf("month");v(l.format("YYYY-MM-DD")),b(n.format("YYYY-MM-DD"))};return(0,p.jsx)(j,{filterType:e=>(e=>{h(e),"normal"===e.value?(v(t),b(l)):"month"===e.value&&E(Y)})(e),startDate:e=>v(e),endDate:e=>b(e),year:e=>D(e),type:u,startDateValue:x,endDateValue:f,chartData:S,isLoading:N,yearValue:m,graphType:a,getMonth:e=>{E(e),_(e)},month:Y})}}}]);